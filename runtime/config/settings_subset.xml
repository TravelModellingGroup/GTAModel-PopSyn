<?xml version="1.0" encoding="UTF-8"?>

<targets>
  <database>
    <server>localhost</server>
    <type>MYSQL</type>
    <user>bmp</user>
    <password>jasmine</password>
    <dbName>TorontoPopSynIII</dbName>
  </database>

  <!-- Specify the PUMS data table names from which PUMA incidence tables are generated, as well as the field name for a unique identifier and the PUMS weight field name -->
  <pumsData>
    <idField>hhnum</idField>
    <pumaFieldName>PUMA</pumaFieldName>
    <metaFieldName>REGION</metaFieldName>
    <tazFieldName>TAZ</tazFieldName>
    <mazFieldName>MAZ</mazFieldName>
    <weightField>weight</weightField>
    <hhTable>hhtable</hhTable>
    <persTable>perstable</persTable>
    <pumsHhTable>hhtable</pumsHhTable>
    <pumsHhIdField>hhnum</pumsHhIdField>
    <pumsPersTable>perstable</pumsPersTable>
    <maxExpansionFactor>15</maxExpansionFactor>
    <synpopOutputHhTableName>synpop_hh</synpopOutputHhTableName>
    <synpopOutputPersTableName>synpop_person</synpopOutputPersTableName>
    <outputHhAttributes>hh_id, hhsize, hhinc, dtype, nworkers, kidspr</outputHhAttributes>
    <outputPersAttributes>pp_id, agegrp, sex, nocs</outputPersAttributes>
  </pumsData>

  <!-- Specify the table name and name of id field for the MAZ control totals table -->
  <mazControlsTable>
    <mazTable id="1">
      <table_name>control_totals_maz</table_name>
      <id_field_name>MAZ</id_field_name>
      <aggregation_level>MAZ</aggregation_level>
    </mazTable>
  </mazControlsTable>

  <!-- Specify the table name and name of id field for the table of TAZ control totals that are not fields in the MAZ control total table -->
  <tazControlsTable>
    <tazTable id="1">
      <table_name>control_totals_taz</table_name>
      <id_field_name>TAZ</id_field_name>
      <aggregation_level>TAZ</aggregation_level>
    </tazTable>
  </tazControlsTable>

  <!-- Specify the table name, id field name, and aggregation level for each table of META control totals -->
  <metaControlsTables>
    <metaTable id="1">
      <table_name>control_totals_meta</table_name>
      <id_field_name>REGION</id_field_name>
      <aggregation_level>PUMA</aggregation_level>
    </metaTable>
  </metaControlsTables>

  <target>
    <!-- Total households in each MAZ Control#0 -->
    <marginals>
      <id>0</id>
      <description>MAZ Level Control: Total Number of Households</description>
      <totalHouseholdsControl>true</totalHouseholdsControl>
      <controlType>simple</controlType>
      <geographyType>MAZ</geographyType>
      <table>hhtable</table>
      <constraint id="1">
        <importance>1.0E9</importance>
        <field>weight</field>
        <controlField>tothh</controlField>
        <type>interval</type>
        <lo_value>0</lo_value>
        <lo_type>open</lo_type>
        <hi_value>infinity</hi_value>
        <hi_type>open</hi_type>
      </constraint>
    </marginals>
  </target>
  
  <target>
    
      <!-- define conditions for 4 persons per household controls for households -->
   <marginals>
          <id>1</id>
      	<description>Number of Households by Persons per Household Category</description>
          <geographyType>maz</geographyType>
          <controlType>simple</controlType>
          <table>hhtable</table>
          <constraint id="1">
          	<importance>1000</importance>
          	<controlField>hhsize1</controlField>
          	<field>hhsize</field>
          	<type>equality</type>
          	<value>1</value>
   	</constraint>
          <constraint id="2">
          	<importance>1000</importance>
          	<controlField>hhsize2</controlField>
          	<field>hhsize</field>
          	<type>equality</type>
          	<value>2</value>
   	</constraint>
   	<constraint id="3">
          	<importance>1000</importance>
          	<controlField>hhsize3</controlField>
          	<field>hhsize</field>
          	<type>equality</type>
          	<value>3</value>
   	</constraint>
          <constraint id="4">
          	<importance>1000</importance>
          	<controlField>hhsize4pl</controlField>
          	<field>hhsize</field>
          	<type>interval</type>
          	<lo_value>4</lo_value>
          	<lo_type>closed</lo_type>
          	<hi_value>infinity</hi_value>
          	<hi_type>open</hi_type>
   	</constraint>
   </marginals>    
  </target>
  
  <target>
  
     <!-- define conditions for 4 household income category constraints for households -->
   <marginals>
         <id>2</id>
     	<description>Number of Households by Household Income Category</description>
         <geographyType>maz</geographyType>
         <controlType>simple</controlType>
         <table>hhtable</table>
        <constraint id="1">
         	<importance>1000</importance>
         	<field>hhinc</field>
         	<controlField>hhinc0_29</controlField>
         	<type>interval</type>
         	<lo_value>-999999999</lo_value>
         	<lo_type>closed</lo_type>
         	<hi_value>30000</hi_value>
         	<hi_type>open</hi_type>
  	</constraint>
         <constraint id="2">
         	<importance>1000</importance>
         	<field>hhinc</field>
         	<controlField>hhinc30_59</controlField>
         	<type>interval</type>
         	<lo_value>30000</lo_value>
         	<lo_type>closed</lo_type>
         	<hi_value>60000</hi_value>
         	<hi_type>open</hi_type>
  	</constraint>
         <constraint id="3">
         	<importance>1000</importance>
         	<field>hhinc</field>
         	<controlField>hhinc60_99</controlField>
         	<type>interval</type>
         	<lo_value>60000</lo_value>
         	<lo_type>closed</lo_type>
         	<hi_value>100000</hi_value>
         	<hi_type>open</hi_type>
  	</constraint>
         <constraint id="4">
         	<importance>1000</importance>
         	<field>hhinc</field>
         	<controlField>hhinc100pl</controlField>
         	<type>interval</type>
         	<lo_value>100000</lo_value>
         	<lo_type>closed</lo_type>
         	<hi_value>999999999</hi_value>
         	<hi_type>open</hi_type>
  	</constraint>
   </marginals>
     
  </target>   
 
    <target>
    
        <!-- define conditions for 5 person age category constraints for households -->
        <marginals>
            <id>3</id>
        	<description>Number of persons by age Category</description>
            <geographyType>maz</geographyType>
            <controlType>count</controlType>
            <table>perstable</table>
           <constraint id="1">
            	<importance>1000</importance>
            	<field>agegrp</field>
            	<controlField>age0_14</controlField>
            	<type>interval</type>
            	<lo_value>1</lo_value>
            	<lo_type>closed</lo_type>
            	<hi_value>2</hi_value>
            	<hi_type>closed</hi_type>
    		</constraint>
           <constraint id="2">
            	<importance>1000</importance>
            	<field>agegrp</field>
            	<controlField>age15_29</controlField>
            	<type>interval</type>
            	<lo_value>3</lo_value>
            	<lo_type>closed</lo_type>
            	<hi_value>5</hi_value>
            	<hi_type>closed</hi_type>
    		</constraint>
           <constraint id="3">
            	<importance>1000</importance>
            	<field>agegrp</field>
            	<controlField>age30_44</controlField>
            	<type>interval</type>
            	<lo_value>6</lo_value>
            	<lo_type>closed</lo_type>
            	<hi_value>8</hi_value>
            	<hi_type>closed</hi_type>
    		</constraint>
			<constraint id="4">
            	<importance>1000</importance>
            	<field>agegrp</field>
            	<controlField>age45_64</controlField>
            	<type>interval</type>
            	<lo_value>9</lo_value>
            	<lo_type>closed</lo_type>
            	<hi_value>11</hi_value>
            	<hi_type>closed</hi_type>
    		</constraint>
            <constraint id="5">
            	<importance>1000</importance>
            	<field>agegrp</field>
            	<controlField>age65pl</controlField>
            	<type>interval</type>
            	<lo_value>12</lo_value>
            	<lo_type>closed</lo_type>
            	<hi_value>999999999</hi_value>
            	<hi_type>open</hi_type>
    		</constraint>
        </marginals>
        
    </target>

  
  <target>

	<!-- define conditions for 10 Meta level occupation type controls -->
	<marginals>
		<id>4</id>
		<description>Number of workers by occupation type</description>
		<geographyType>meta</geographyType>
		<controlType>count</controlType>
		<table>perstable</table>
		<constraint id="1">
			<importance>1000</importance>
			<field>nocs</field>
			<controlField>occup0</controlField>
			<type>equality</type>
			<value>1</value>
		</constraint>
		<constraint id="2">
			<importance>1000</importance>
			<field>nocs</field>
			<controlField>occup1</controlField>
			<type>equality</type>
			<value>2</value>
		</constraint>
		<constraint id="3">
			<importance>1000</importance>
			<field>nocs</field>
			<controlField>occup2</controlField>
			<type>equality</type>
			<value>3</value>
		</constraint>
		<constraint id="4">
			<importance>1000</importance>
			<field>nocs</field>
			<controlField>occup3</controlField>
			<type>equality</type>
			<value>4</value>
		</constraint>
		<constraint id="5">
			<importance>1000</importance>
			<field>nocs</field>
			<controlField>occup4</controlField>
			<type>equality</type>
			<value>5</value>
		</constraint>
		<constraint id="6">
			<importance>1000</importance>
			<field>nocs</field>
			<controlField>occup5</controlField>
			<type>equality</type>
			<value>6</value>
		</constraint>
		<constraint id="7">
			<importance>1000</importance>
			<field>nocs</field>
			<controlField>occup6</controlField>
			<type>equality</type>
			<value>7</value>
		</constraint>
		<constraint id="8">
			<importance>1000</importance>
			<field>nocs</field>
			<controlField>occup7</controlField>
			<type>equality</type>
			<value>8</value>
		</constraint>
		<constraint id="9">
			<importance>1000</importance>
			<field>nocs</field>
			<controlField>occup8</controlField>
			<type>equality</type>
			<value>9</value>
		</constraint>
		<constraint id="10">
			<importance>1000</importance>
			<field>nocs</field>
			<controlField>occup9</controlField>
			<type>equality</type>
			<value>10</value>
		</constraint>
	</marginals>
	
  </target>
  
 
</targets>